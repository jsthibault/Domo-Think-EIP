{
  "swagger": "2.0",
  "info": {
    "version": "0.0.0",
    "title": "Domothink-API"
  },
  "definitions": {
    "periodicity": {
      "type": "object",
      "required": [
        "name"
      ],
      "properties": {
        "type": {
          "type": "number"
        },
        "name": {
          "type": "string"
        },
        "date": {
          "type": "string"
        }
      }
    },
    "directive": {
      "type": "object",
      "required": [
        "name"
      ],
      "properties": {
        "id": {
          "type": "number"
        },
        "name": {
          "type": "string"
        },
        "creatorId": {
          "type": "number"
        },
        "objectId": {
          "type": "number"
        },
        "actionId": {
          "type": "number"
        },
        "periodicity": {
          "$ref": "#/definitions/periodicity"
        }
      }
    },
    "boxInformations": {
      "type": "object",
      "required": [
        "name"
      ],
      "properties": {
        "id": {
          "type": "number"
        },
        "name": {
          "type": "string"
        },
        "version": {
          "type": "string"
        },
        "ownerId": {
          "type": "number"
        },
        "data": {
          "type": "object"
        }
      }
    },
    "plugin": {
      "type": "object",
      "required": [
        "name"
      ],
      "properties": {
        "id": {
          "type": "number"
        },
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "activate": {
          "type": "boolean"
        }
      }
    },
    "device": {
      "type": "object",
      "required": [
        "name"
      ],
      "properties": {
        "id": {
          "type": "number"
        },
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "activate": {
          "type": "boolean"
        }
      }
    },
    "group": {
      "type": "object",
      "required": [
        "name"
      ],
      "properties": {
        "id": {
          "type": "number"
        },
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "id_objects": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/device"
          }
        }
      }
    },
    "connectionInfos": {
      "properties": {
        "username": {
          "type": "string"
        },
        "password": {
          "type": "string"
        }
      }
    }
  },
  "paths": {
    "/user/auth": {
      "post": {
        "description": "Authentifie l'utilisateur",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Connection informations",
            "required": true,
            "schema": {
              "$ref": "#/definitions/connectionInfos"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "schema": {
              "title": "token",
              "type": "string"
            }
          }
        }
      }
    },
    "/user/infosBox": {
      "get": {
        "description": "Get les informations de la box de l'utilisateur",
        "parameters": [
          {
            "name": "token",
            "in": "query",
            "description": "Token of the logged user",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "schema": {
              "title": "array",
              "type": "array",
              "items": {
                "$ref": "#/definitions/boxInformations"
              }
            }
          }
        }
      }
    },
    "/user/logout": {
      "post": {
        "description": "Logout l'utilisateur loggé",
        "parameters": [
          {
            "name": "token",
            "in": "query",
            "description": "Token of the logged user",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response"
          }
        }
      }
    },
    "/directive": {
      "get": {
        "description": "Authentifie l'utilisateur",
        "responses": {
          "200": {
            "description": "Successful response",
            "schema": {
              "title": "array",
              "type": "array",
              "items": {
                "$ref": "#/definitions/directive"
              }
            }
          }
        }
      },
      "post": {
        "description": "Créer une directive",
        "parameters": [
          {
            "name": "directive",
            "in": "body",
            "description": "Directive à créer",
            "required": true,
            "schema": {
              "$ref": "#/definitions/directive"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "schema": {
              "title": "id",
              "type": "number"
            }
          }
        }
      }
    },
    "/directive/{id}": {
      "get": {
        "description": "Get la directive en fonction de l'id",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id de la directive",
            "required": true,
            "type": "number"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "schema": {
              "$ref": "#/definitions/directive"
            }
          }
        }
      },
      "put": {
        "description": "Edite la directive en fonction de l'id",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id de la directive à modifier",
            "required": true,
            "type": "number"
          },
          {
            "name": "directive",
            "in": "body",
            "description": "Directive à modifier",
            "required": true,
            "schema": {
              "$ref": "#/definitions/directive"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "schema": {
              "type": "number",
              "title": "Id de la directive"
            }
          }
        }
      },
      "delete": {
        "description": "Get la directive en fonction de l'id",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id de la directive à modifier",
            "required": true,
            "type": "number"
          },
          {
            "name": "directive",
            "in": "body",
            "description": "Directive à supprimer",
            "required": true,
            "schema": {
              "$ref": "#/definitions/directive"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response"
          }
        }
      }
    },
    "/update/{boxVersion}": {
      "get": {
        "description": "Permet de savoir si il y a une update ou non",
        "parameters": [
          {
            "name": "boxVersion",
            "in": "path",
            "description": "Version de la box",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "schema": {
              "title": "newVersion",
              "type": "boolean"
            }
          }
        }
      }
    },
    "/update/dl": {
      "get": {
        "description": "Renvoie la dernière version",
        "responses": {
          "200": {
            "description": "Successful response",
            "schema": {
              "title": "data",
              "type": "object"
            }
          }
        }
      }
    },
    "/store": {
      "get": {
        "description": "renvoie tout les plugins du store",
        "responses": {
          "200": {
            "description": "Succesful response",
            "schema": {
              "title": "array",
              "type": "array",
              "items": {
                "$ref": "#/definitions/plugin"
              }
            }
          }
        }
      }
    },
    "/store/{plugin_id}": {
      "get": {
        "description": "renvoie un plugin ainsi que ca description",
        "parameters": [
          {
            "name": "plugin_id",
            "in": "path",
            "description": "id du plugin",
            "required": true,
            "type": "number"
          }
        ],
        "responses": {
          "200": {
            "description": "Suceesful response",
            "schema": {
              "$ref": "#/definitions/plugin"
            }
          }
        }
      }
    },
    "/store/install/{plugin_id}": {
      "post": {
        "description": "installer un plugin",
        "parameters": [
          {
            "name": "plugin_id",
            "in": "path",
            "description": "id du plugin",
            "required": true,
            "type": "number"
          }
        ],
        "responses": {
          "200": {
            "description": "Sucessful response"
          }
        }
      }
    },
    "/store/uninstall/{plugin_id}": {
      "post": {
        "description": "desinstaller un plugin",
        "parameters": [
          {
            "name": "plugin_id",
            "in": "path",
            "description": "id du plugin",
            "required": true,
            "type": "number"
          }
        ],
        "responses": {
          "200": {
            "description": "Sucessful response"
          }
        }
      }
    },
    "/plugin": {
      "get": {
        "description": "renvoie tout les plugins installer",
        "responses": {
          "200": {
            "description": "Successul response",
            "schema": {
              "title": "array",
              "type": "array",
              "items": {
                "$ref": "#/definitions/plugin"
              }
            }
          }
        }
      }
    },
    "/plugin/activate/{id}": {
      "get": {
        "description": "Activer le plugin",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id du plugin à activer",
            "required": true,
            "type": "number"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response"
          }
        }
      }
    },
    "/plugin/desactivate/{id}": {
      "get": {
        "description": "Desactiver le plugin",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id du plugin à désactiver",
            "required": true,
            "type": "number"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response"
          }
        }
      }
    },
    "/device": {
      "get": {
        "description": "get tout les object",
        "responses": {
          "200": {
            "description": "Sucessful response",
            "schema": {
              "title": "array",
              "type": "array",
              "items": {
                "$ref": "#/definitions/device"
              }
            }
          }
        }
      },
      "post": {
        "description": "ajouter un object",
        "parameters": [
          {
            "name": "device",
            "in": "body",
            "description": "object a ajouter",
            "required": true,
            "schema": {
              "$ref": "#/definitions/device"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sucessfull response"
          }
        }
      }
    },
    "/device/{id}": {
      "get": {
        "description": "Get un object en fonction de l'id",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id object",
            "required": true,
            "type": "number"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "schema": {
              "$ref": "#/definitions/device"
            }
          }
        }
      },
      "put": {
        "description": "Edite un object en fonction de l'id",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id de la directive à modifier",
            "required": true,
            "type": "number"
          },
          {
            "name": "device",
            "in": "body",
            "description": "device à modifier",
            "required": true,
            "schema": {
              "$ref": "#/definitions/device"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "schema": {
              "type": "number",
              "title": "Id object"
            }
          }
        }
      },
      "delete": {
        "description": "object a supprimer",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "id object a supprimer",
            "required": true,
            "type": "number"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response"
          }
        }
      }
    },
    "/device/group": {
      "get": {
        "description": "get tout les group",
        "responses": {
          "200": {
            "description": "Sucessful response",
            "schema": {
              "title": "array",
              "type": "array",
              "items": {
                "$ref": "#/definitions/group"
              }
            }
          }
        }
      },
      "post": {
        "description": "ajouter un groupe",
        "parameters": [
          {
            "name": "device",
            "in": "body",
            "description": "ajouter un groupe",
            "required": true,
            "schema": {
              "$ref": "#/definitions/group"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sucessfull response"
          }
        }
      }
    },
    "/device/group/{id_group}": {
      "get": {
        "description": "get un group",
        "parameters": [
          {
            "name": "id_group",
            "in": "path",
            "description": "id du group",
            "required": true,
            "type": "number"
          }
        ],
        "responses": {
          "200": {
            "description": "Sucessful response",
            "schema": {
              "$ref": "#/definitions/group"
            }
          }
        }
      },
      "post": {
        "description": "ajouter un device a un groupe",
        "parameters": [
          {
            "name": "id_group",
            "in": "path",
            "description": "ID du groupe",
            "required": true,
            "type": "number"
          },
          {
            "name": "device",
            "in": "body",
            "description": "Device a ajouter au groupe",
            "required": true,
            "schema": {
              "$ref": "#/definitions/device"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response"
          }
        }
      },
      "delete": {
        "description": "delete d'un group",
        "parameters": [
          {
            "name": "id_group",
            "in": "path",
            "description": "Id de la directive à modifier",
            "required": true,
            "type": "number"
          },
          {
            "name": "device",
            "in": "body",
            "description": "Device à supprimer d'un group",
            "required": true,
            "schema": {
              "$ref": "#/definitions/directive"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response"
          }
        }
      }
    }
  }
}
